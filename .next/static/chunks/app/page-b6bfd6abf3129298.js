(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6167:function(e,t,r){Promise.resolve().then(r.bind(r,3516))},3516:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{default:function(){return _}});var o=r(7437),l=r(2265),i=r(9842);let a=(0,r(5236).ZF)({apiKey:"AIzaSyDfOWyfA2FrJwiyDtv4Wy7kp1r1w-3bNkU",authDomain:"next-firebase-35299.firebaseapp.com",projectId:"next-firebase-35299",storageBucket:"next-firebase-35299.appspot.com",messagingSenderId:"556063452247",appId:"1:556063452247:web:b1c43bf2801704f59f0712"}),s=(0,i.ad)(a),d=(0,i.ad)(a);var c=r(5735),p=r(6920),x=r(5079);let u={confirmContainer:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f8d7da",padding:"10px",borderRadius:"4px",color:"#721c24"},confirmButton:{backgroundColor:"#dc3545",color:"#fff",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"4px",margin:"5px"},cancelButton:{backgroundColor:"#6c757d",color:"#fff",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"4px",margin:"5px"},deleteButton:{backgroundColor:"transparent",border:"none",color:"#dc3545",cursor:"pointer",fontSize:"16px"}};var h=e=>{let{id:t,onDelete:r}=e,[n,a]=(0,l.useState)(!1),s=async()=>{try{await (0,i.oe)((0,i.JU)(d,"items",t)),console.log("Document deleted with ID: ",t),r(t)}catch(e){console.error("Error deleting document: ",e)}};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsxs)("div",{style:u.confirmContainer,children:[(0,o.jsx)("p",{children:"\xcates-vous s\xfbr de vouloir supprimer cet article?"}),(0,o.jsx)("button",{onClick:s,style:u.confirmButton,children:"Oui"}),(0,o.jsx)("button",{onClick:()=>a(!1),style:u.cancelButton,children:"Annuler"})]}):(0,o.jsx)("button",{onClick:()=>a(!0),style:u.deleteButton,children:(0,o.jsx)(p.G,{icon:x.$aW})})})},g=r(6290),m=r(8344);let f={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{flex:"1 0 auto",padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},grid:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},card:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"left"},title:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},articleContent:{fontSize:"14px",marginBottom:"10px",paddingLeft:"10px"},image:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"4px",marginBottom:"10px"},date:{fontSize:"12px",color:"#888",marginBottom:"10px"},buttonGroup:{display:"flex",justifyContent:"flex-end",gap:"10px"},editButton:{backgroundColor:"transparent",border:"none",color:"#007bff",cursor:"pointer",fontSize:"16px"},paginationContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px",marginBottom:"20px"},paginationButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",marginLeft:"10px",marginRight:"10px"}};var b=()=>{let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(1),g=(0,m.s0)();(0,l.useEffect)(()=>{b()},[b]);let b=async()=>{try{let e;e=1===c?(0,i.IO)((0,i.hJ)(d,"items"),(0,i.Xo)("title"),(0,i.b9)(2)):(0,i.IO)((0,i.hJ)(d,"items"),(0,i.Xo)("title"),(0,i.TQ)(r),(0,i.b9)(2));let o=await (0,i.PL)(e),l=o.docs[o.docs.length-1];n(l),t(o.docs.map(e=>({...e.data(),id:e.id}))),s(o.empty)}catch(e){console.error("Error fetching items: ",e)}},y=e=>{console.log("Editing item with id: ".concat(e)),g("/edit/".concat(e))},j=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,o.jsxs)("div",{style:f.container,children:[(0,o.jsxs)("div",{style:f.content,children:[(0,o.jsx)("h2",{style:f.header,children:"Liste des Articles"}),(0,o.jsx)("div",{style:f.grid,children:e.map(e=>(0,o.jsxs)("div",{style:f.card,children:[(0,o.jsx)("h3",{style:f.title,children:e.title}),(0,o.jsx)("div",{style:f.articleContent,dangerouslySetInnerHTML:{__html:e.content}}),e.imageUrl&&(0,o.jsx)("img",{src:e.imageUrl,alt:e.title,style:f.image}),e.createdAt&&(0,o.jsxs)("p",{style:f.date,children:["Cr\xe9\xe9 le : ",e.createdAt.toDate().toLocaleDateString("fr-FR")]}),(0,o.jsxs)("div",{style:f.buttonGroup,children:[(0,o.jsx)("button",{onClick:()=>y(e.id),style:f.editButton,children:(0,o.jsx)(p.G,{icon:x.Xcf})}),(0,o.jsx)(h,{id:e.id,onDelete:j})]})]},e.id))})]}),(0,o.jsxs)("div",{style:f.paginationContainer,children:[(0,o.jsx)("button",{onClick:()=>{c>1&&u(e=>e-1)},style:f.paginationButton,disabled:1===c,children:"Pr\xe9c\xe9dent"}),(0,o.jsxs)("span",{children:["Page ",c]}),(0,o.jsx)("button",{onClick:()=>{a||u(e=>e+1)},style:f.paginationButton,disabled:a,children:"Suivant"})]})]})},y=r(9854),j=r(8436),v=r.n(j);r(8416),"undefined"!=typeof document?n=r(6290).s0:n=()=>null;let C={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{marginBottom:"5px",fontWeight:"bold"},input:{padding:"10px",borderRadius:"4px",border:"1px solid #ced4da"},textarea:{height:"300px",border:"1px solid #ced4da",borderRadius:"4px"},submitButton:{backgroundColor:"#007bff",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",alignSelf:"flex-start"},message:{marginTop:"20px",color:"#28a745",fontWeight:"bold"},preview:{marginTop:"30px",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}};var S=()=>{let[e,t]=(0,l.useState)(""),[r,a]=(0,l.useState)(""),[s,c]=(0,l.useState)(null),[p,x]=(0,l.useState)(""),u=n(),h=async t=>{t.preventDefault();try{let t="";s&&(t=await g(s));let n={title:e,content:r,imageUrl:t,createdAt:i.EK.fromDate(new Date)};console.log("Item Data:",n),await (0,i.ET)((0,i.hJ)(d,"items"),n),console.log("Document successfully written!"),x("Article cr\xe9\xe9 avec succ\xe8s !"),u("/")}catch(e){x("Erreur lors de la cr\xe9ation de l'article."),console.error("Error writing document: ",e)}},g=async e=>{try{let t=(0,y.cF)(),r=(0,y.iH)(t,"images/".concat(e.name)),n=await (0,y.KV)(r,e),o=await (0,y.Jt)(n.ref);return console.log("Download URL:",o),o}catch(e){throw console.error("Error uploading image: ",e),e}};return(0,o.jsxs)("div",{style:C.content,children:[(0,o.jsx)("h2",{style:C.header,children:"Cr\xe9er un Article"}),(0,o.jsxs)("form",{onSubmit:h,style:C.form,children:[(0,o.jsxs)("div",{style:C.formGroup,children:[(0,o.jsx)("label",{style:C.label,children:"Titre"}),(0,o.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),style:C.input,placeholder:"Entrez le titre de l'article"})]}),(0,o.jsxs)("div",{style:C.formGroup,children:[(0,o.jsx)("label",{style:C.label,children:"Contenu"}),(0,o.jsx)(v(),{value:r,onChange:a,style:C.textarea,placeholder:"Entrez le contenu de l'article"})]}),(0,o.jsxs)("div",{style:C.formGroup,children:[(0,o.jsx)("label",{style:C.label,children:"Image"}),(0,o.jsx)("input",{type:"file",onChange:e=>{c(e.target.files[0])},style:C.input})]}),(0,o.jsx)("button",{type:"submit",style:C.submitButton,children:"Cr\xe9er"})]}),p&&(0,o.jsx)("p",{style:C.message,children:p})," ",(0,o.jsxs)("div",{style:C.preview,children:[(0,o.jsx)("h3",{children:"Pr\xe9visualisation :"}),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})," "]})]})};let w={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},table:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},tableHeader:{backgroundColor:"#343a40",color:"#fff",padding:"10px",textAlign:"left"},tableRow:{borderBottom:"1px solid #ddd"},tableCell:{padding:"10px",textAlign:"left",verticalAlign:"middle"},image:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"4px"},editButton:{backgroundColor:"transparent",border:"none",color:"#007bff",cursor:"pointer",fontSize:"16px",marginRight:"10px"},pagination:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px",marginBottom:"20px"},paginationButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",marginRight:"10px",outline:"none",boxShadow:"none"},paginationText:{fontSize:"16px",fontWeight:"bold",margin:"0 10px"}};var B=()=>{let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(1),[g,f]=(0,l.useState)(0),b=(0,m.s0)();(0,l.useEffect)(()=>{(async()=>{try{let e=(0,i.IO)((0,i.hJ)(d,"items"),(0,i.Xo)("title"),(0,i.b9)(4));c>1&&(e=(0,i.IO)((0,i.hJ)(d,"items"),(0,i.Xo)("title"),(0,i.TQ)(r),(0,i.b9)(4)));let o=await (0,i.PL)(e),l=o.docs[o.docs.length-1];n(l),t(o.docs.map(e=>({...e.data(),id:e.id}))),s(o.empty)}catch(e){console.error("Error fetching items: ",e)}})(),(async()=>{try{let e=(0,i.IO)((0,i.hJ)(d,"items")),t=(await (0,i.PL)(e)).size;f(t)}catch(e){console.error("Error calculating total items: ",e)}})()},[c,r]);let y=Math.ceil(g/4),j=e=>{console.log("Editing item with id: ".concat(e)),b("/edit/".concat(e))},v=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,o.jsxs)("div",{style:w.content,children:[(0,o.jsx)("h2",{style:w.header,children:"Liste des Articles"}),(0,o.jsxs)("table",{style:w.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:w.tableHeader,children:"Nom"}),(0,o.jsx)("th",{style:w.tableHeader,children:"Description"}),(0,o.jsx)("th",{style:w.tableHeader,children:"Image"}),(0,o.jsx)("th",{style:w.tableHeader,children:"Date de Publication"}),(0,o.jsx)("th",{style:w.tableHeader,children:"Actions"})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{style:w.tableRow,children:[(0,o.jsx)("td",{style:w.tableCell,children:e.title}),(0,o.jsx)("td",{style:w.tableCell,dangerouslySetInnerHTML:{__html:e.content}}),(0,o.jsx)("td",{style:w.tableCell,children:e.imageUrl&&(0,o.jsx)("img",{src:e.imageUrl,alt:e.title,style:w.image})}),(0,o.jsx)("td",{style:w.tableCell,children:e.createdAt&&(0,o.jsx)("p",{style:w.date,children:e.createdAt.toDate().toLocaleDateString("fr-FR")})}),(0,o.jsxs)("td",{style:w.tableCell,children:[(0,o.jsx)("button",{onClick:()=>j(e.id),style:w.editButton,children:(0,o.jsx)(p.G,{icon:x.Xcf})}),(0,o.jsx)(h,{id:e.id,onDelete:v})]})]},e.id))})]}),!a&&(0,o.jsxs)("div",{style:w.pagination,children:[(0,o.jsx)("button",{onClick:()=>{c>1&&u(e=>e-1)},disabled:1===c,style:w.paginationButton,children:"< Pr\xe9c\xe9dent"}),(0,o.jsxs)("span",{style:w.paginationText,children:["Page ",c," sur ",y]}),(0,o.jsx)("button",{onClick:()=>{c<y&&u(e=>e+1)},disabled:c===y,style:w.paginationButton,children:"Suivant >"})]})]})};let k={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{marginBottom:"5px",fontWeight:"bold"},input:{padding:"10px",borderRadius:"4px",border:"1px solid #ced4da"},textarea:{height:"300px",border:"1px solid #ced4da",borderRadius:"4px"},submitButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",alignSelf:"flex-start"},message:{marginTop:"20px",color:"#28a745",fontWeight:"bold"}};var D=()=>{let{id:e}=(0,m.UO)(),[t,r]=(0,l.useState)(""),[n,a]=(0,l.useState)(""),[d,c]=(0,l.useState)("");(0,l.useEffect)(()=>{e&&p(e)},[e]);let p=async e=>{try{let t=(0,i.JU)(s,"items",e),n=await (0,i.QT)(t);if(n.exists()){let{title:e,content:t}=n.data();r(e),a(t)}else console.error("No such document!")}catch(e){console.error("Error fetching document:",e)}},x=async r=>{r.preventDefault();try{if(!e){console.error("No id provided");return}let r=(0,i.JU)(s,"items",e);await (0,i.r7)(r,{title:t,content:n}),c("Document successfully updated!"),console.log("Document successfully updated with ID: ",e)}catch(e){c("Error updating document."),console.error("Error updating document: ",e)}};return(0,o.jsxs)("div",{style:k.content,children:[(0,o.jsx)("h2",{style:k.header,children:"Modifier l'Article"}),(0,o.jsxs)("form",{onSubmit:x,style:k.form,children:[(0,o.jsxs)("div",{style:k.formGroup,children:[(0,o.jsx)("label",{style:k.label,children:"Titre"}),(0,o.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),style:k.input,placeholder:"Entrez le titre de l'article"})]}),(0,o.jsxs)("div",{style:k.formGroup,children:[(0,o.jsx)("label",{style:k.label,children:"Contenu"}),(0,o.jsx)(v(),{value:n,onChange:a,style:k.textarea,placeholder:"Entrez le contenu de l'article"})]}),(0,o.jsx)("button",{type:"submit",style:k.submitButton,children:"Mettre \xe0 jour"})]}),d&&(0,o.jsx)("p",{style:k.message,children:d})," "]})},E=r(1942);let A={display:"flex",height:"100vh"},R={width:"250px",backgroundColor:"#343a40",color:"#fff",padding:"20px",display:"flex",flexDirection:"column",alignItems:"flex-start"},I={listStyleType:"none",padding:0,width:"100%"},W={width:"100%",marginBottom:"10px"},z={color:"#fff",textDecoration:"none",fontSize:"18px",display:"flex",alignItems:"center",padding:"10px",borderRadius:"5px",transition:"background-color 0.3s"},L={flex:1,padding:"20px",backgroundColor:"#f8f9fa"},T={marginRight:"10px"};var U=()=>(0,o.jsx)(g.VK,{children:(0,o.jsxs)("div",{style:A,children:[(0,o.jsx)("nav",{style:R,children:(0,o.jsxs)("ul",{style:I,children:[(0,o.jsx)("li",{style:W,children:(0,o.jsxs)(g.rU,{to:"/",style:z,children:[(0,o.jsx)(E.xng,{style:T})," Accueil"]})}),(0,o.jsx)("li",{style:W,children:(0,o.jsxs)(g.rU,{to:"/list",style:z,children:[(0,o.jsx)(E.AeW,{style:T})," Articles"]})}),(0,o.jsx)("li",{style:W,children:(0,o.jsxs)(g.rU,{to:"/add",style:z,children:[(0,o.jsx)(E.wEH,{style:T})," Ajouter un article"]})})]})}),(0,o.jsx)("main",{style:L,children:(0,o.jsxs)(m.Z5,{children:[(0,o.jsx)(m.AW,{path:"/",element:(0,o.jsx)(b,{})}),(0,o.jsx)(m.AW,{path:"/list",element:(0,o.jsx)(B,{})}),(0,o.jsx)(m.AW,{path:"/add",element:(0,o.jsx)(S,{})}),(0,o.jsx)(m.AW,{path:"/edit/:id",element:(0,o.jsx)(D,{})})]})})]})});let G=[{email:"user1@example.com",password:"password1"},{email:"user2@example.com",password:"password2"}],H=e=>{let{onLogin:t}=e,[r,n]=(0,l.useState)(""),[i,a]=(0,l.useState)("");return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r,i)},children:[(0,o.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:e=>n(e.target.value)}),(0,o.jsx)("input",{type:"password",placeholder:"Password",value:i,onChange:e=>a(e.target.value)}),(0,o.jsx)("button",{type:"submit",children:"Login"})]})},J={maxWidth:"800px",margin:"0 auto",padding:"20px",textAlign:"center",backgroundColor:"#f4f4f4",borderRadius:"8px"},P={fontSize:"24px",fontWeight:"bold",marginBottom:"20px"};var _=()=>{let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),[p,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{u()},[]),(0,l.useEffect)(()=>{let e=(0,c.v0)().onAuthStateChanged(e=>{e?x(e):x(null)});return()=>e()},[]);let u=async()=>{try{let e=(0,i.IO)((0,i.hJ)(d,"items"),(0,i.Xo)("title"),(0,i.b9)(5)),r=await (0,i.PL)(e),o=r.docs[r.docs.length-1];n(o),t(r.docs.map(e=>({...e.data(),id:e.id}))),s(r.empty)}catch(e){console.error("Error fetching items: ",e)}},h=async(e,t)=>{try{let r=G.find(r=>r.email===e&&r.password===t);r?(x({email:r.email}),navigate("/dashboard")):console.error("Invalid credentials")}catch(e){console.error("Error signing in: ",e)}},g=async()=>{try{let e=(0,c.v0)();await (0,c.w7)(e),x(null),navigate("/")}catch(e){console.error("Error signing out: ",e)}};return(0,o.jsxs)("div",{style:J,children:[(0,o.jsx)("h2",{style:P,children:"Dashboard - List of Items"}),p?(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Welcome, ",p.email,"!"]}),(0,o.jsx)("button",{onClick:g,children:"Logout"}),(0,o.jsx)(U,{})]}):(0,o.jsx)(H,{onLogin:h})]})}}},function(e){e.O(0,[325,699,676,70,898,252,358,491,971,23,744],function(){return e(e.s=6167)}),_N_E=e.O()}]);