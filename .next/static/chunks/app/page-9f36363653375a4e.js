(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5743:function(e,t,r){Promise.resolve().then(r.bind(r,3121))},3121:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{default:function(){return F}});var l={};r.r(l),r.d(l,{db:function(){return d}});var o=r(1720),i=r(2286),a=r(8501);let s=(0,r(8120).ZF)({apiKey:"AIzaSyDfOWyfA2FrJwiyDtv4Wy7kp1r1w-3bNkU",authDomain:"next-firebase-35299.firebaseapp.com",projectId:"next-firebase-35299",storageBucket:"next-firebase-35299.appspot.com",messagingSenderId:"556063452247",appId:"1:556063452247:web:b1c43bf2801704f59f0712"}),d=(0,a.ad)(s),c=(0,a.ad)(l.default);var p=r(8721),x=r(6595),u=r(469);let h={confirmContainer:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f8d7da",padding:"10px",borderRadius:"4px",color:"#721c24"},confirmButton:{backgroundColor:"#dc3545",color:"#fff",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"4px",margin:"5px"},cancelButton:{backgroundColor:"#6c757d",color:"#fff",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"4px",margin:"5px"},deleteButton:{backgroundColor:"transparent",border:"none",color:"#dc3545",cursor:"pointer",fontSize:"16px"}};var g=e=>{let{id:t,onDelete:r}=e,[n,l]=(0,i.useState)(!1),s=async()=>{try{await (0,a.oe)((0,a.JU)(c,"items",t)),console.log("Document deleted with ID: ",t),r(t)}catch(e){console.error("Error deleting document: ",e)}};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsxs)("div",{style:h.confirmContainer,children:[(0,o.jsx)("p",{children:"\xcates-vous s\xfbr de vouloir supprimer cet article?"}),(0,o.jsx)("button",{onClick:s,style:h.confirmButton,children:"Oui"}),(0,o.jsx)("button",{onClick:()=>l(!1),style:h.cancelButton,children:"Annuler"})]}):(0,o.jsx)("button",{onClick:()=>l(!0),style:h.deleteButton,children:(0,o.jsx)(x.G,{icon:u.$aW})})})},f=r(7896),m=r(8702),b=r(714);let y={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{flex:"1 0 auto",padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},grid:{display:"grid",gridTemplateColumns:"1fr",gap:"20px"},card:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"left"},title:{fontSize:"18px",fontWeight:"bold",marginBottom:"10px"},articleContent:{fontSize:"14px",marginBottom:"10px",paddingLeft:"10px"},image:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"4px",marginBottom:"10px"},date:{fontSize:"12px",color:"#888",marginBottom:"10px"},buttonGroup:{display:"flex",justifyContent:"flex-end",gap:"10px"},editButton:{backgroundColor:"transparent",border:"none",color:"#007bff",cursor:"pointer",fontSize:"16px"},paginationContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px",marginBottom:"20px"},paginationButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",marginLeft:"10px",marginRight:"10px"}};var j=()=>{let[e,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[d,p]=(0,i.useState)(1),h=(0,m.s0)();(0,i.useEffect)(()=>{(async()=>{try{let e;e=1===d?(0,a.IO)((0,a.hJ)(c,"items"),(0,a.Xo)("title"),(0,a.b9)(2)):(0,a.IO)((0,a.hJ)(c,"items"),(0,a.Xo)("title"),(0,a.TQ)(r),(0,a.b9)(2));let l=await (0,a.PL)(e),o=l.docs[l.docs.length-1];n(o),t(l.docs.map(e=>({...e.data(),id:e.id}))),s(l.empty)}catch(e){console.error("Error fetching items: ",e)}})()},[d,r]);let f=e=>{console.log("Editing item with id: ".concat(e)),h("/edit/".concat(e))},j=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,o.jsxs)("div",{style:y.container,children:[(0,o.jsxs)("div",{style:y.content,children:[(0,o.jsx)("h2",{style:y.header,children:"Liste des Articles"}),(0,o.jsx)("div",{style:y.grid,children:e.map(e=>(0,o.jsxs)("div",{style:y.card,children:[(0,o.jsx)("h3",{style:y.title,children:e.title}),(0,o.jsx)("div",{style:y.articleContent,dangerouslySetInnerHTML:{__html:e.content}}),e.imageUrl&&(0,o.jsx)(b.default,{src:e.imageUrl,alt:e.title,width:100,height:100,style:y.image}),e.createdAt&&(0,o.jsxs)("p",{style:y.date,children:["Cr\xe9\xe9 le : ",e.createdAt.toDate().toLocaleDateString("fr-FR")]}),(0,o.jsxs)("div",{style:y.buttonGroup,children:[(0,o.jsx)("button",{onClick:()=>f(e.id),style:y.editButton,children:(0,o.jsx)(x.G,{icon:u.Xcf})}),(0,o.jsx)(g,{id:e.id,onDelete:j})]})]},e.id))})]}),(0,o.jsxs)("div",{style:y.paginationContainer,children:[(0,o.jsx)("button",{onClick:()=>{d>1&&p(e=>e-1)},style:y.paginationButton,disabled:1===d,children:"Pr\xe9c\xe9dent"}),(0,o.jsxs)("span",{children:["Page ",d]}),(0,o.jsx)("button",{onClick:()=>{l||p(e=>e+1)},style:y.paginationButton,disabled:l,children:"Suivant"})]})]})},v=r(7381),C=r(312),S=r.n(C);r(2268),"undefined"!=typeof document?n=r(7896).s0:n=()=>null;let w={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{marginBottom:"5px",fontWeight:"bold"},input:{padding:"10px",borderRadius:"4px",border:"1px solid #ced4da"},textarea:{height:"300px",border:"1px solid #ced4da",borderRadius:"4px"},submitButton:{backgroundColor:"#007bff",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",alignSelf:"flex-start"},message:{marginTop:"20px",color:"#28a745",fontWeight:"bold"},preview:{marginTop:"30px",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}};var B=()=>{let[e,t]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),[s,d]=(0,i.useState)(null),[p,x]=(0,i.useState)(""),u=n(),h=async t=>{t.preventDefault();try{let t="";s&&(t=await g(s));let n={title:e,content:r,imageUrl:t,createdAt:a.EK.fromDate(new Date)};console.log("Item Data:",n),await (0,a.ET)((0,a.hJ)(c,"items"),n),console.log("Document successfully written!"),x("Article cr\xe9\xe9 avec succ\xe8s !"),u("/")}catch(e){x("Erreur lors de la cr\xe9ation de l'article."),console.error("Error writing document: ",e)}},g=async e=>{try{let t=(0,v.cF)(),r=(0,v.iH)(t,"images/".concat(e.name)),n=await (0,v.KV)(r,e),l=await (0,v.Jt)(n.ref);return console.log("Download URL:",l),l}catch(e){throw console.error("Error uploading image: ",e),e}};return(0,o.jsxs)("div",{style:w.content,children:[(0,o.jsx)("h2",{style:w.header,children:"Cr\xe9er un Article"}),(0,o.jsxs)("form",{onSubmit:h,style:w.form,children:[(0,o.jsxs)("div",{style:w.formGroup,children:[(0,o.jsx)("label",{style:w.label,children:"Titre"}),(0,o.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),style:w.input,placeholder:"Entrez le titre de l'article"})]}),(0,o.jsxs)("div",{style:w.formGroup,children:[(0,o.jsx)("label",{style:w.label,children:"Contenu"}),(0,o.jsx)(S(),{value:r,onChange:l,style:w.textarea,placeholder:"Entrez le contenu de l'article"})]}),(0,o.jsxs)("div",{style:w.formGroup,children:[(0,o.jsx)("label",{style:w.label,children:"Image"}),(0,o.jsx)("input",{type:"file",onChange:e=>{d(e.target.files[0])},style:w.input})]}),(0,o.jsx)("button",{type:"submit",style:w.submitButton,children:"Cr\xe9er"})]}),p&&(0,o.jsx)("p",{style:w.message,children:p})," ",(0,o.jsxs)("div",{style:w.preview,children:[(0,o.jsx)("h3",{children:"Pr\xe9visualisation :"}),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})," "]})]})};let k={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},table:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},tableHeader:{backgroundColor:"#343a40",color:"#fff",padding:"10px",textAlign:"left"},tableRow:{borderBottom:"1px solid #ddd"},tableCell:{padding:"10px",textAlign:"left",verticalAlign:"middle"},image:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"4px"},editButton:{backgroundColor:"transparent",border:"none",color:"#007bff",cursor:"pointer",fontSize:"16px",marginRight:"10px"},pagination:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px",marginBottom:"20px"},paginationButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",marginRight:"10px",outline:"none",boxShadow:"none"},paginationText:{fontSize:"16px",fontWeight:"bold",margin:"0 10px"}};var D=()=>{let[e,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[d,p]=(0,i.useState)(1),[h,f]=(0,i.useState)(0),y=(0,m.s0)();(0,i.useEffect)(()=>{(async()=>{try{let e=(0,a.IO)((0,a.hJ)(c,"items"),(0,a.Xo)("title"),(0,a.b9)(4));d>1&&(e=(0,a.IO)((0,a.hJ)(c,"items"),(0,a.Xo)("title"),(0,a.TQ)(r),(0,a.b9)(4)));let l=await (0,a.PL)(e),o=l.docs[l.docs.length-1];n(o),t(l.docs.map(e=>({...e.data(),id:e.id}))),s(l.empty)}catch(e){console.error("Error fetching items: ",e)}})(),(async()=>{try{let e=(0,a.IO)((0,a.hJ)(c,"items")),t=(await (0,a.PL)(e)).size;f(t)}catch(e){console.error("Error calculating total items: ",e)}})()},[d,r]);let j=Math.ceil(h/4),v=e=>{console.log("Editing item with id: ".concat(e)),y("/edit/".concat(e))},C=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,o.jsxs)("div",{style:k.content,children:[(0,o.jsx)("h2",{style:k.header,children:"Liste des Articles"}),(0,o.jsxs)("table",{style:k.table,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:k.tableHeader,children:"Nom"}),(0,o.jsx)("th",{style:k.tableHeader,children:"Description"}),(0,o.jsx)("th",{style:k.tableHeader,children:"Image"}),(0,o.jsx)("th",{style:k.tableHeader,children:"Date de Publication"}),(0,o.jsx)("th",{style:k.tableHeader,children:"Actions"})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{style:k.tableRow,children:[(0,o.jsx)("td",{style:k.tableCell,children:e.title}),(0,o.jsx)("td",{style:k.tableCell,dangerouslySetInnerHTML:{__html:e.content}}),(0,o.jsx)("td",{style:k.tableCell,children:e.imageUrl&&(0,o.jsx)(b.default,{src:e.imageUrl,alt:e.title,width:100,height:100,style:k.image})}),(0,o.jsx)("td",{style:k.tableCell,children:e.createdAt&&(0,o.jsx)("p",{style:k.date,children:e.createdAt.toDate().toLocaleDateString("fr-FR")})}),(0,o.jsxs)("td",{style:k.tableCell,children:[(0,o.jsx)("button",{onClick:()=>v(e.id),style:k.editButton,children:(0,o.jsx)(x.G,{icon:u.Xcf})}),(0,o.jsx)(g,{id:e.id,onDelete:C})]})]},e.id))})]}),!l&&(0,o.jsxs)("div",{style:k.pagination,children:[(0,o.jsx)("button",{onClick:()=>{d>1&&p(e=>e-1)},disabled:1===d,style:k.paginationButton,children:"< Pr\xe9c\xe9dent"}),(0,o.jsxs)("span",{style:k.paginationText,children:["Page ",d," sur ",j]}),(0,o.jsx)("button",{onClick:()=>{d<j&&p(e=>e+1)},disabled:d===j,style:k.paginationButton,children:"Suivant >"})]})]})};let E={content:{padding:"20px"},header:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},form:{display:"flex",flexDirection:"column"},formGroup:{marginBottom:"15px"},label:{marginBottom:"5px",fontWeight:"bold"},input:{padding:"10px",borderRadius:"4px",border:"1px solid #ced4da"},textarea:{height:"300px",border:"1px solid #ced4da",borderRadius:"4px"},submitButton:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"10px 20px",cursor:"pointer",borderRadius:"4px",alignSelf:"flex-start"},message:{marginTop:"20px",color:"#28a745",fontWeight:"bold"}};var A=()=>{let{id:e}=(0,m.UO)(),[t,r]=(0,i.useState)(""),[n,l]=(0,i.useState)(""),[s,c]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&p(e)},[e]);let p=async e=>{try{let t=(0,a.JU)(d,"items",e),n=await (0,a.QT)(t);if(n.exists()){let{title:e,content:t}=n.data();r(e),l(t)}else console.error("No such document!")}catch(e){console.error("Error fetching document:",e)}},x=async r=>{r.preventDefault();try{if(!e){console.error("No id provided");return}let r=(0,a.JU)(d,"items",e);await (0,a.r7)(r,{title:t,content:n}),c("Document successfully updated!"),console.log("Document successfully updated with ID: ",e)}catch(e){c("Error updating document."),console.error("Error updating document: ",e)}};return(0,o.jsxs)("div",{style:E.content,children:[(0,o.jsx)("h2",{style:E.header,children:"Modifier l'Article"}),(0,o.jsxs)("form",{onSubmit:x,style:E.form,children:[(0,o.jsxs)("div",{style:E.formGroup,children:[(0,o.jsx)("label",{style:E.label,children:"Titre"}),(0,o.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),style:E.input,placeholder:"Entrez le titre de l'article"})]}),(0,o.jsxs)("div",{style:E.formGroup,children:[(0,o.jsx)("label",{style:E.label,children:"Contenu"}),(0,o.jsx)(S(),{value:n,onChange:l,style:E.textarea,placeholder:"Entrez le contenu de l'article"})]}),(0,o.jsx)("button",{type:"submit",style:E.submitButton,children:"Mettre \xe0 jour"})]}),s&&(0,o.jsx)("p",{style:E.message,children:s})," "]})},R=r(8516);let I={display:"flex",height:"100vh"},W={width:"250px",backgroundColor:"#343a40",color:"#fff",padding:"20px",display:"flex",flexDirection:"column",alignItems:"flex-start"},z={listStyleType:"none",padding:0,width:"100%"},L={width:"100%",marginBottom:"10px"},T={color:"#fff",textDecoration:"none",fontSize:"18px",display:"flex",alignItems:"center",padding:"10px",borderRadius:"5px",transition:"background-color 0.3s"},U={flex:1,padding:"20px",backgroundColor:"#f8f9fa"},G={marginRight:"10px"};var H=()=>(0,o.jsx)(f.VK,{children:(0,o.jsxs)("div",{style:I,children:[(0,o.jsx)("nav",{style:W,children:(0,o.jsxs)("ul",{style:z,children:[(0,o.jsx)("li",{style:L,children:(0,o.jsxs)(f.rU,{to:"/",style:T,children:[(0,o.jsx)(R.xng,{style:G})," Accueil"]})}),(0,o.jsx)("li",{style:L,children:(0,o.jsxs)(f.rU,{to:"/list",style:T,children:[(0,o.jsx)(R.AeW,{style:G})," Articles"]})}),(0,o.jsx)("li",{style:L,children:(0,o.jsxs)(f.rU,{to:"/add",style:T,children:[(0,o.jsx)(R.wEH,{style:G})," Ajouter un article"]})})]})}),(0,o.jsx)("main",{style:U,children:(0,o.jsxs)(m.Z5,{children:[(0,o.jsx)(m.AW,{path:"/",element:(0,o.jsx)(j,{})}),(0,o.jsx)(m.AW,{path:"/list",element:(0,o.jsx)(D,{})}),(0,o.jsx)(m.AW,{path:"/add",element:(0,o.jsx)(B,{})}),(0,o.jsx)(m.AW,{path:"/edit/:id",element:(0,o.jsx)(A,{})})]})})]})});let J=[{email:"user1@example.com",password:"password1"},{email:"user2@example.com",password:"password2"}],P=e=>{let{onLogin:t}=e,[r,n]=(0,i.useState)(""),[l,a]=(0,i.useState)("");return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r,l)},children:[(0,o.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:e=>n(e.target.value)}),(0,o.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>a(e.target.value)}),(0,o.jsx)("button",{type:"submit",children:"Login"})]})},_={maxWidth:"800px",margin:"0 auto",padding:"20px",textAlign:"center",backgroundColor:"#f4f4f4",borderRadius:"8px"},O={fontSize:"24px",fontWeight:"bold",marginBottom:"20px"};var F=()=>{let[e,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[d,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{u()},[]),(0,i.useEffect)(()=>{let e=(0,p.v0)().onAuthStateChanged(e=>{e?x(e):x(null)});return()=>e()},[]);let u=async()=>{try{let e=(0,a.IO)((0,a.hJ)(c,"items"),(0,a.Xo)("title"),(0,a.b9)(5)),r=await (0,a.PL)(e),l=r.docs[r.docs.length-1];n(l),t(r.docs.map(e=>({...e.data(),id:e.id}))),s(r.empty)}catch(e){console.error("Error fetching items: ",e)}},h=async(e,t)=>{try{let r=J.find(r=>r.email===e&&r.password===t);r?(x({email:r.email}),navigate("/dashboard")):console.error("Invalid credentials")}catch(e){console.error("Error signing in: ",e)}},g=async()=>{try{let e=(0,p.v0)();await (0,p.w7)(e),x(null),navigate("/")}catch(e){console.error("Error signing out: ",e)}};return(0,o.jsxs)("div",{style:_,children:[(0,o.jsx)("h2",{style:O,children:"Dashboard - List of Items"}),d?(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Welcome, ",d.email,"!"]}),(0,o.jsx)("button",{onClick:g,children:"Logout"}),(0,o.jsx)(H,{})]}):(0,o.jsx)(P,{onLogin:h})]})}}},function(e){e.O(0,[523,699,676,70,898,252,358,171,73,899,744],function(){return e(e.s=5743)}),_N_E=e.O()}]);